!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){t.exports=jQuery},function(t,e,i){"use strict";function n(t,e){return[t%e,Math.floor(t/e)]}i.r(e),i.d(e,"Context",(function(){return E}));var o=0,a=1,r=2,s=3,h=4;function l(t,e,i,n,o){this.image=document.createElement("img"),this.image.src=t,this.collisionWidth=e,this.collisionHeight=i,this.spriteSheetWidth=n,this.spritePositions=o}function u(t,e,i){this.animationDelay=t,this.animationIndexCounter=e,this.animationCurrentFrame=i}function c(t){this.TO_RADIANS=Math.PI/180,this.image=null,this.spriteSheet=null,this.spritePositions=null,this.animate=null,this.collisionWidth=null,this.collisionHeight=null,this.x=0,this.y=0,this.is_pattern=!1,this.load=function(t){return this.image=new Image,this.image.src=t,this},null!=t&&""!=t&&null!=t?t instanceof l?(this.spriteSheet=t,this.image=this.spriteSheet.image,this.animate=new u(0,0,0),this.collisionWidth=this.spriteSheet.collisionWidth,this.collisionHeight=this.spriteSheet.collisionHeight,this.spritePositions=this.spriteSheet.spritePositions,console.log("Loaded sprite "+this.spriteSheet)):(this.load(t),console.log("Loaded sprite "+t)):console.log("Unable to load sprite. Filename '"+t+"' is undefined or null."),this.draw=function(t,e,i){if(null==i)E.context.drawImage(this.image,t,e,MAP_BLOCK_W,MAP_BLOCK_H);else{var o=this.getSpritePositions(i);if(Array.isArray(o)&&o.length>0){this.animate.animationDelay++>=3&&(this.animate.animationDelay=0,this.animate.animationIndexCounter++,this.animate.animationIndexCounter>=o.length&&(this.animate.animationIndexCounter=0),this.animate.animationCurrentFrame=o[this.animate.animationIndexCounter]);var a=n(this.animate.animationCurrentFrame,this.spriteSheet.spriteSheetWidth);E.context.drawImage(this.image,32*a[0],32*a[1],32,32,t,e,32,32)}}this.x=t,this.y=e},this.draw2=function(t,e,i,n){if(this.is_pattern)for(var o=0;o<this.pattern_x_times;o++)E.context.drawImage(this.image,t+i*o,e,i,n);else E.context.drawImage(this.image,t,e,i,n)},this.rotImage=function(t,e,i,o){this.animate.animationDelay++>=3&&(this.animate.animationDelay=0,this.animate.animationIndexCounter++,this.animate.animationIndexCounter>=o.length&&(this.animate.animationIndexCounter=0),this.animate.animationCurrentFrame=o[this.animate.animationIndexCounter]);var a=n(this.animate.animationCurrentFrame,4);E.context.save(),E.context.translate(t-16,e-16),E.context.rotate(i*this.TO_RADIANS),E.context.drawImage(this.image,32*a[0],32*a[1],32,32,t,e,32,32),E.context.restore()},this.rot=function(t,e,i){E.context.save(),E.context.translate(t,e),E.context.rotate(i*this.TO_RADIANS),E.context.drawImage(this.image,-this.image.width/2,-this.image.height/2),E.context.restore()},this.getSpritePositions=function(t){return this.spritePositions?t==o?this.spritePositions.left:t==a?this.spritePositions.right:t==r?this.spritePositions.up:t==s?this.spritePositions.down:this.spritePositions.none:null}}var d=!1,m=new Array,f=new l("./images/water.png",16,16),y=new c("./images/wall.png"),g=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,0,1,1,1,0,0,1,0,1,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,1,0,1,1,0,0,1,1,1,0,1,0,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,0,1,1,1,0,0,1,0,1,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,1,0,1,1,0,0,1,1,1,0,1,0,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var p=new function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.keyShiftState=!1,this.keyLeftState=!1,this.keyRightState=!1,this.keyUpState=!1,this.keyDownState=!1,this.upLeftState=!1,this.upRightState=!1,this.downLeftState=!1,this.downRightState=!1};function v(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var S=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,(i=[{key:"detectCollision",value:function(t,e){return!!(t&&t&&t.x<e.x+e.collisionWidth&&t.x+t.collisionWidth>e.x&&t.y<e.y+e.collisionHeight&&t.y+t.collisionHeight>e.y)}}])&&v(e.prototype,i),n&&v(e,n),t}();function w(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var C=new SpriteSheet("./images/dog-sprite-sheet.png",10,10,5,EnemyPositions);var x=function(){function t(e,i,n,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sprite=new Sprite(e),this.x=this.sprite.x=i,this.y=this.sprite.y=n,this.borderWidth=o,this.borderHeight=a,this.cirle=50,this.moveCirle=50,this.direction=DirectionEnum.none,this.moveChoosed=!1}var e,i,n;return e=t,(i=[{key:"move",value:function(){var t=this.getEnemyCoordinates(this.x,this.y,1,this.borderWidth,this.borderHeight);this.x=t.x,this.y=t.y,this.sprite.draw(this.x,this.y,t.direction)}},{key:"getEnemyCoordinates",value:function(t,e,i,n,o){return!this.moveChoosed&&this.moveCirle>0?(this.direction=this.getRandomInt(4),this.moveChoosed=!0):(this.moveCirle--,this.moveCirle<=0&&(this.moveChoosed=!1,this.moveCirle=this.cirle)),this.direction==DirectionEnum.left&&(t-i>=0?t-=i:this.getEnemyCoordinates(t,e,1,n,o)),this.direction==DirectionEnum.right&&(t+i<=n?t+=i:this.getEnemyCoordinates(t,e,1,n,o)),this.direction==DirectionEnum.up&&(e-i>=0?e-=i:this.getEnemyCoordinates(t,e,1,n,o)),this.direction==DirectionEnum.down&&(e+i<=o?e+=i:this.getEnemyCoordinates(t,e,1,n,o)),{x:t,y:e,direction:this.direction}}},{key:"getRandomInt",value:function(t){return Math.floor(Math.random()*Math.floor(t))}}])&&w(e.prototype,i),n&&w(e,n),t}(),k=i(0),b=i.n(k),I=!1,P=!1,D=!1,_=h,E=null,L=new l("./images/bang.png",15,15,8,{left:[31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,31,32],right:[31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,31,32],up:[31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,31,32],down:[31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,31,32],none:[31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,31,32]}),R=new l("./images/cats.png",10,10,4,{left:[12,13,14,15],right:[4,5,6,7],up:[8,9,10,11],down:[0,1,2,3],none:[17,18,19,20,21,22,22,22,22,22,22,22,22,23]}),O=new c(L),A=new c(R),M=A.x=0,W=A.y=0,j=new Array,H=new S;b()(document).ready((function(){E=new HTML("game",1280,960),$(document).keydown((function(t){16==t.keyCode&&(p.keyShiftState=!0),37==t.keyCode&&(p.keyLeftState=!0),39==t.keyCode&&(p.keyRightState=!0),38==t.keyCode&&(p.keyUpState=!0),40==t.keyCode&&(p.keyDownState=!0),p.keyLeftState&&p.keyUpState&&(p.upLeftState=!0),39==t.keyCode&&38==t.keyCode&&(p.upRightState=!0),37==t.keyCode&&40==t.keyCode&&(p.downLeftState=!0),39==t.keyCode&&40==t.keyCode&&(p.downRightState=!0)})),$(document).keyup((function(t){p.upLeftState=!1,p.upRightState=!1,p.downLeftState=!1,p.downRightState=!1,16==t.keyCode&&(p.keyShiftState=!1),37==t.keyCode&&(p.keyLeftState=!1),39==t.keyCode&&(p.keyRightState=!1),38==t.keyCode&&(p.keyUpState=!1),40==t.keyCode&&(p.keyDownState=!1)})),function(t,e,i,n){for(var o=1;o<e;o++)t.push(new x(C,100*o,30*o,i,n))}(j,10,200,200),isWaterSaved=!1,function(){for(var t=0,e=0;e<10;e+=1)for(var i=0;i<100;i+=1,t++){var n=32*i,o=32*e;if(1==g[t])y.draw(n,o);else{var a=new c(f);a.draw(n,o),d||m.push(a)}}d=!0}()})),setInterval((function(){var t;!function(){for(var t=0,e=0;e<10;e+=1)for(var i=0;i<100;i+=1,t++){var n=32*i,o=32*e;1==g[t]&&y.draw(n,o)}for(var a=0;a<m.length;a++){var r=m[a];r.draw(r.x,r.y)}}(),function(){for(var t=0;t<j.length&&!I;t++)I=H.detectCollision(A,j[t].sprite)}(),function(){for(var t=0;t<m.length&&(!P&&!D);t++)P=H.detectCollision(A,m[t])}(),I?(O.draw(M,W,4),I=!0):(t=h,p.keyLeftState&&(P||(M-=1,D=!1),t=o),p.keyRightState&&(P||(M+=1,D=!1),t=a),p.keyDownState&&(P||(W+=1,D=!1),t=s),p.keyUpState&&(P||(W-=1,D=!1),t=r),_!=t&&(_=t,P=!1,D=!0),A.draw(M,W,t),function(){for(var t=0;t<j.length;t++)j[t].move()}())}),40)}]);